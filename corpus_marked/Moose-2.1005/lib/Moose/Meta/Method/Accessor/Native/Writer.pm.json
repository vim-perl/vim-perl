[["Statement","package"],["Type"," Moose::Meta::Method::Accessor::Native::Writer"],["",";\n"],["PreProc","BEGIN "],["","{\n  "],["Identifier","$"],["Type","Moose::Meta::Method::Accessor::Native::Writer::"],["Identifier","AUTHORITY"],[""," = "],["String","'cpan:STEVAN'"],["",";\n}\n{\n  "],["Identifier","$"],["Type","Moose::Meta::Method::Accessor::Native::Writer::"],["Identifier","VERSION"],[""," = "],["String","'2.1005'"],["",";\n}\n\n"],["Statement","use strict"],["",";\n"],["Statement","use warnings"],["",";\n\n"],["Statement","use "],["","List::MoreUtils "],["String","qw( any )"],["",";\n"],["Statement","use "],["","Moose::Util;\n\n"],["Statement","use "],["","Moose::Role;\n\nwith "],["String","'Moose::Meta::Method::Accessor::Native'"],["",";\n\nrequires "],["String","'_potential_value'"],["",";\n\n"],["Keyword","sub "],["Function","_generate_method "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$inv"],["","         = "],["String","'$self'"],["",";\n    "],["Statement","my"],[""," "],["Identifier","$slot_access"],[""," = "],["Identifier","$self"],["","->_get_value("],["Identifier","$inv"],["",");\n\n    "],["Statement","return"],[""," (\n        "],["String","'sub {'"],["",",\n            "],["String","'my '"],[""," . "],["Identifier","$inv"],[""," . "],["String","' = shift;'"],["",",\n            "],["Identifier","$self"],["","->_inline_curried_arguments,\n            "],["Identifier","$self"],["","->_inline_writer_core("],["Identifier","$inv"],["",", "],["Identifier","$slot_access"],["","),\n        "],["String","'}'"],["",",\n    );\n}\n\n"],["Keyword","sub "],["Function","_inline_writer_core "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," ("],["Identifier","$inv"],["",", "],["Identifier","$slot_access"],["",") = "],["Identifier","@_"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$potential"],[""," = "],["Identifier","$self"],["","->_potential_value("],["Identifier","$slot_access"],["",");\n    "],["Statement","my"],[""," "],["Identifier","$old"],["","       = "],["String","'@old'"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","@code"],["",";\n    "],["Statement","push"],[""," "],["Identifier","@code"],["",", (\n        "],["Identifier","$self"],["","->_inline_check_argument_count,\n        "],["Identifier","$self"],["","->_inline_process_arguments("],["Identifier","$inv"],["",", "],["Identifier","$slot_access"],["","),\n        "],["Identifier","$self"],["","->_inline_check_arguments("],["String","'for writer'"],["","),\n        "],["Identifier","$self"],["","->_inline_check_lazy("],["Identifier","$inv"],["",", "],["String","'$type_constraint'"],["",", "],["String","'$type_coercion'"],["",", "],["String","'$type_message'"],["","),\n    );\n\n    "],["Conditional","if"],[""," ("],["Identifier","$self"],["","->_return_value("],["Identifier","$slot_access"],["",")) {\n        "],["Comment","# some writers will save the return value in this variable when they"],["","\n        "],["Comment","# generate the potential value."],["","\n        "],["Statement","push"],[""," "],["Identifier","@code"],["",", "],["String","'my @return;'"],["","\n    }\n\n    "],["Statement","push"],[""," "],["Identifier","@code"],["",", (\n        "],["Identifier","$self"],["","->_inline_coerce_new_values,\n        "],["Identifier","$self"],["","->_inline_copy_native_value(\\"],["Identifier","$potential"],["","),\n        "],["Identifier","$self"],["","->_inline_tc_code("],["Identifier","$potential"],["",", "],["String","'$type_constraint'"],["",", "],["String","'$type_coercion'"],["",", "],["String","'$type_message'"],["","),\n        "],["Identifier","$self"],["","->_inline_get_old_value_for_trigger("],["Identifier","$inv"],["",", "],["Identifier","$old"],["","),\n        "],["Identifier","$self"],["","->_inline_capture_return_value("],["Identifier","$slot_access"],["","),\n        "],["Identifier","$self"],["","->_inline_set_new_value("],["Identifier","$inv"],["",", "],["Identifier","$potential"],["",", "],["Identifier","$slot_access"],["","),\n        "],["Identifier","$self"],["","->_inline_trigger("],["Identifier","$inv"],["",", "],["Identifier","$slot_access"],["",", "],["Identifier","$old"],["","),\n        "],["Identifier","$self"],["","->_inline_return_value("],["Identifier","$slot_access"],["",", "],["String","'for writer'"],["","),\n    );\n\n    "],["Statement","return"],[""," "],["Identifier","@code"],["",";\n}\n\n"],["Keyword","sub "],["Function","_inline_process_arguments "],["","{ "],["Statement","return"],[""," }\n\n"],["Keyword","sub "],["Function","_inline_check_arguments "],["","{ "],["Statement","return"],[""," }\n\n"],["Keyword","sub "],["Function","_inline_coerce_new_values "],["","{ "],["Statement","return"],[""," }\n\n"],["Keyword","sub "],["Function","_writer_value_needs_copy "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->_constraint_must_be_checked;\n}\n\n"],["Keyword","sub "],["Function","_constraint_must_be_checked "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$attr"],[""," = "],["Identifier","$self"],["","->associated_attribute;\n\n    "],["Statement","return"],[""," "],["Identifier","$attr"],["","->has_type_constraint\n        && ( !"],["Identifier","$self"],["","->_is_root_type( "],["Identifier","$attr"],["","->type_constraint )\n        || ( "],["Identifier","$attr"],["","->should_coerce && "],["Identifier","$attr"],["","->type_constraint->has_coercion ) );\n}\n\n"],["Keyword","sub "],["Function","_is_root_type "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," "],["Identifier","$type"],[""," = "],["Statement","shift"],["",";\n\n    "],["Conditional","if"],[""," (\n        Moose::Util::does_role( "],["Identifier","$type"],["",", "],["String","'Specio::Constraint::Role::Interface'"],[""," ) )\n    {\n        "],["Statement","require"],[""," Specio::Library::Builtins;\n        "],["Statement","return"],["","\n            any { "],["Identifier","$type"],["","->is_same_type_as( Specio::Library::Builtins::t("],["Identifier","$_"],["",") ) }\n        "],["Identifier","@{"],[""," "],["Identifier","$self"],["","->root_types "],["Identifier","}"],["",";\n    }\n    "],["Conditional","else"],[""," {\n        "],["Statement","my"],[""," "],["Identifier","$name"],[""," = "],["Identifier","$type"],["","->name;\n        "],["Statement","return"],[""," any { "],["Identifier","$name"],[""," "],["Operator","eq"],[""," "],["Identifier","$_"],[""," } "],["Identifier","@{"],[""," "],["Identifier","$self"],["","->root_types "],["Identifier","}"],["",";\n    }\n}\n\n"],["Keyword","sub "],["Function","_inline_copy_native_value "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," ("],["Identifier","$potential_ref"],["",") = "],["Identifier","@_"],["",";\n\n    "],["Statement","return"],[""," "],["Conditional","unless"],[""," "],["Identifier","$self"],["","->_writer_value_needs_copy;\n\n    "],["Statement","my"],[""," "],["Identifier","$code"],[""," = "],["String","'my $potential = '"],[""," . "],["Identifier","${$potential_ref}"],[""," . "],["String","';'"],["",";\n\n    "],["Identifier","${$potential_ref}"],[""," = "],["String","'$potential'"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$code"],["",";\n}\n\naround "],["String","_inline_tc_code"],[""," => "],["Keyword","sub "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$orig"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," ("],["Identifier","$value"],["",", "],["Identifier","$tc"],["",", "],["Identifier","$coercion"],["",", "],["Identifier","$message"],["",", "],["Identifier","$for_lazy"],["",") = "],["Identifier","@_"],["",";\n\n    "],["Statement","return"],[""," "],["Conditional","unless"],[""," "],["Identifier","$for_lazy"],[""," || "],["Identifier","$self"],["","->_constraint_must_be_checked;\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->"],["Identifier","$orig"],["","("],["Identifier","@_"],["",");\n};\n\naround "],["String","_inline_check_constraint"],[""," => "],["Keyword","sub "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$orig"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," ("],["Identifier","$value"],["",", "],["Identifier","$tc"],["",", "],["Identifier","$message"],["",", "],["Identifier","$for_lazy"],["",") = "],["Identifier","@_"],["",";\n\n    "],["Statement","return"],[""," "],["Conditional","unless"],[""," "],["Identifier","$for_lazy"],[""," || "],["Identifier","$self"],["","->_constraint_must_be_checked;\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->"],["Identifier","$orig"],["","("],["Identifier","@_"],["",");\n};\n\n"],["Keyword","sub "],["Function","_inline_capture_return_value "],["","{ "],["Statement","return"],[""," }\n\n"],["Keyword","sub "],["Function","_inline_set_new_value "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->_inline_store_value("],["Identifier","@_"],["",")\n        "],["Conditional","if"],[""," "],["Identifier","$self"],["","->_writer_value_needs_copy\n        || !"],["Identifier","$self"],["","->_slot_access_can_be_inlined\n        || !"],["Identifier","$self"],["","->_get_is_lvalue;\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->_inline_optimized_set_new_value("],["Identifier","@_"],["",");\n}\n\n"],["Keyword","sub "],["Function","_get_is_lvalue "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->associated_attribute->associated_class->instance_metaclass->inline_get_is_lvalue;\n}\n\n"],["Keyword","sub "],["Function","_inline_optimized_set_new_value "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$self"],["","->_inline_store_value("],["Identifier","@_"],["",");\n}\n\n"],["Keyword","sub "],["Function","_return_value "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n    "],["Statement","my"],[""," ("],["Identifier","$slot_access"],["",") = "],["Identifier","@_"],["",";\n\n    "],["Statement","return"],[""," "],["Identifier","$slot_access"],["",";\n}\n\n"],["Statement","no "],["","Moose::Role;\n\n"],["Number","1"],["",";\n"]]