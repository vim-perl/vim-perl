[["Statement","package"],["Type"," Moose::Meta::Method::Augmented"],["",";\n"],["PreProc","BEGIN "],["","{\n  "],["Identifier","$"],["Type","Moose::Meta::Method::Augmented::"],["Identifier","AUTHORITY"],[""," = "],["String","'cpan:STEVAN'"],["",";\n}\n{\n  "],["Identifier","$"],["Type","Moose::Meta::Method::Augmented::"],["Identifier","VERSION"],[""," = "],["String","'2.1005'"],["",";\n}\n\n"],["Statement","use strict"],["",";\n"],["Statement","use warnings"],["",";\n\n"],["Statement","use base"],[""," "],["String","'Moose::Meta::Method'"],["",";\n\n"],["Keyword","sub "],["Function","new "],["","{\n    "],["Statement","my"],[""," ( "],["Identifier","$class"],["",", "],["Identifier","%args"],[""," ) = "],["Identifier","@_"],["",";\n\n    "],["Comment","# the package can be overridden by roles"],["","\n    "],["Comment","# it is really more like body's compilation stash"],["","\n    "],["Comment","# this is where we need to override the definition of super() so that the"],["","\n    "],["Comment","# body of the code can call the right overridden version"],["","\n    "],["Statement","my"],[""," "],["Identifier","$name"],[""," = "],["Identifier","$args{"],["String","name"],["Identifier","}"],["",";\n    "],["Statement","my"],[""," "],["Identifier","$meta"],[""," = "],["Identifier","$args{"],["String","class"],["Identifier","}"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$super"],[""," = "],["Identifier","$meta"],["","->find_next_method_by_name("],["Identifier","$name"],["",");\n\n    ("],["Operator","defined"],[""," "],["Identifier","$super"],["",")\n        || "],["Identifier","$meta"],["","->throw_error("],["String","\"You cannot augment '"],["Identifier","$name"],["String","' because it has no super method\""],["",", "],["String","data"],[""," => "],["Identifier","$name"],["",");\n\n    "],["Statement","my"],[""," "],["Identifier","$_super_package"],[""," = "],["Identifier","$super"],["","->package_name;\n    "],["Comment","# BUT!,... if this is an overridden method ...."],["","\n    "],["Conditional","if"],[""," ("],["Identifier","$super"],["","->isa("],["String","'Moose::Meta::Method::Overridden'"],["",")) {\n        "],["Comment","# we need to be sure that we actually"],["","\n        "],["Comment","# find the next method, which is not"],["","\n        "],["Comment","# an 'override' method, the reason is"],["","\n        "],["Comment","# that an 'override' method will not"],["","\n        "],["Comment","# be the one calling inner()"],["","\n        "],["Statement","my"],[""," "],["Identifier","$real_super"],[""," = "],["Identifier","$meta"],["","->_find_next_method_by_name_which_is_not_overridden("],["Identifier","$name"],["",");\n        "],["Identifier","$_super_package"],[""," = "],["Identifier","$real_super"],["","->package_name;\n    }\n\n    "],["Statement","my"],[""," "],["Identifier","$super_body"],[""," = "],["Identifier","$super"],["","->body;\n\n    "],["Statement","my"],[""," "],["Identifier","$method"],[""," = "],["Identifier","$args{"],["String","method"],["Identifier","}"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$body"],[""," = "],["Keyword","sub "],["","{\n        "],["Statement","local"],[""," "],["Identifier","$"],["Type","Moose::"],["Identifier","INNER_ARGS{$_super_package}"],[""," = [ "],["Identifier","@_"],[""," ];\n        "],["Statement","local"],[""," "],["Identifier","$"],["Type","Moose::"],["Identifier","INNER_BODY{$_super_package}"],[""," = "],["Identifier","$method"],["",";\n        "],["Identifier","$super_body"],["","->("],["Identifier","@_"],["",");\n    };\n\n    "],["Comment","# "],["Todo","FIXME"],["Comment"," store additional attrs"],["","\n    "],["Identifier","$class"],["","->wrap(\n        "],["Identifier","$body"],["",",\n        "],["String","package_name"],[""," => "],["Identifier","$meta"],["","->name,\n        "],["String","name"],["","         => "],["Identifier","$name"],["","\n    );\n}\n\n"],["Number","1"],["",";\n\n"],["Comment","# ABSTRACT: A Moose Method metaclass for augmented methods"],["","\n\n"],["Comment","__END__"],["","\n\n"],["Statement","=pod"],["","\n\n"],["Statement","=head1"],[""," "],["String","NAME"],["","\n\nMoose::Meta::Method::Augmented - A Moose Method metaclass for augmented methods\n\n"],["Statement","=head1"],[""," "],["String","VERSION"],["","\n\nversion 2.1005\n\n"],["Statement","=head1"],[""," "],["String","DESCRIPTION"],["","\n\nThis class implements method augmentation logic for the "],["Identifier","L<Moose>"],["","\n"],["Identifier","C<augment>"],[""," keyword.\n\nThe augmentation subroutine reference will be invoked explicitly using\nthe "],["Identifier","C<inner>"],[""," keyword from the parent class's method definition.\n\n"],["Statement","=head1"],[""," "],["String","INHERITANCE"],["","\n\n"],["Identifier","C<Moose::Meta::Method::Augmented>"],[""," is a subclass of "],["Identifier","L<Moose::Meta::Method>"],["",".\n\n"],["Statement","=head1"],[""," "],["String","METHODS"],["","\n\n"],["Statement","=over"],[""," "],["Number","4"],["","\n\n"],["Statement","=item"],[""," "],["Identifier","B<< Moose::Meta::Method::Augmented->new(%options) >>"],["","\n\nThis constructs a new object. It accepts the following options:\n\n"],["Statement","=over"],[""," "],["Number","8"],["","\n\n"],["Statement","=item"],[""," "],["String","* class"],["","\n\nThe metaclass object for the class in which the augmentation is being\ndeclared. This option is required.\n\n"],["Statement","=item"],[""," "],["String","* name"],["","\n\nThe name of the method which we are augmenting. This method must exist\nin one of the class's superclasses. This option is required.\n\n"],["Statement","=item"],[""," "],["String","* method"],["","\n\nThe subroutine reference which implements the augmentation. This\noption is required.\n\n"],["Statement","=back"],["","\n\n"],["Statement","=back"],["","\n\n"],["Statement","=head1"],[""," "],["String","BUGS"],["","\n\nSee "],["Identifier","L<Moose/BUGS>"],[""," for details on reporting bugs.\n\n"],["Statement","=head1"],[""," "],["String","AUTHOR"],["","\n\nMoose is maintained by the Moose Cabal, along with the help of many contributors. See "],["Identifier","L<Moose/CABAL>"],[""," and "],["Identifier","L<Moose/CONTRIBUTORS>"],[""," for details.\n\n"],["Statement","=head1"],[""," "],["String","COPYRIGHT AND LICENSE"],["","\n\nThis software is copyright (c) 2013 by Infinity Interactive, Inc..\n\nThis is free software; you can redistribute it and/or modify it under\nthe same terms as the Perl 5 programming language system itself.\n\n"],["Statement","=cut"],["","\n"]]