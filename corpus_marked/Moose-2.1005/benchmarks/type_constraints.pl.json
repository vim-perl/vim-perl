[["PreProc","#!/usr/bin/perl"],["","\n\n"],["Statement","use strict"],["",";\n"],["Statement","use warnings"],["",";\n\n"],["Statement","use "],["","Benchmark "],["String","qw[cmpthese]"],["",";\n\n"],["Statement","=pod"],["","\n\nThis benchmark compares the overhead of a\nauto-created type constraint vs. none at\nall vs. a custom-created type.\n\n"],["Statement","=cut"],["","\n\n{\n    "],["Statement","package"],["Type"," Foo"],["",";\n    "],["Statement","use "],["","Moose;\n    "],["Statement","use "],["","Moose::Util::TypeConstraints;\n\n    has "],["String","'baz'"],[""," => ("],["String","is"],[""," => "],["String","'rw'"],["",");\n    has "],["String","'bar'"],[""," => ("],["String","is"],[""," => "],["String","'rw'"],["",", "],["String","isa"],[""," => "],["String","'Foo'"],["",");\n}\n\n{\n    "],["Statement","package"],["Type"," Bar"],["",";\n\n    "],["Keyword","sub "],["Function","new "],["","{ "],["Operator","bless"],[""," {} => __PACKAGE__ }\n    "],["Keyword","sub "],["Function","bar "],["","{\n        "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n        "],["Identifier","$self->{"],["String","bar"],["Identifier","}"],[""," = "],["Statement","shift"],[""," "],["Conditional","if"],[""," "],["Identifier","@_"],["",";\n        "],["Identifier","$self->{"],["String","bar"],["Identifier","}"],["",";\n    }\n}\n\n"],["Statement","my"],[""," "],["Identifier","$foo"],[""," = Foo->new;\n"],["Statement","my"],[""," "],["Identifier","$bar"],[""," = Bar->new;\n\ncmpthese("],["Number","200_000"],["",",\n    {\n        "],["String","'hand coded'"],[""," => "],["Keyword","sub "],["","{\n            "],["Identifier","$bar"],["","->bar("],["Identifier","$bar"],["",");\n        },\n        "],["String","'w/out_constraint'"],[""," => "],["Keyword","sub "],["","{\n            "],["Identifier","$foo"],["","->baz("],["Identifier","$foo"],["",");\n        },\n        "],["String","'w_constraint'"],[""," => "],["Keyword","sub "],["","{\n            "],["Identifier","$foo"],["","->bar("],["Identifier","$foo"],["",");\n        },\n    }\n);\n\n"],["Number","1"],["",";\n"]]