[["Statement","package"],["Type"," inc::GitUpToDate"],["",";\n"],["Statement","use "],["","Moose;\n\nwith "],["String","'Dist::Zilla::Role::BeforeBuild'"],["",";\n\n"],["Keyword","sub "],["Function","git "],["","{\n    "],["Conditional","if"],[""," ("],["Statement","wantarray"],["",") {\n        "],["Statement","chomp"],["","("],["Statement","my"],[""," "],["Identifier","@ret"],[""," = "],["String","qx{git "],["Identifier","$_["],["Number","0"],["Identifier","]"],["String","}"],["",");\n        "],["Statement","return"],[""," "],["Identifier","@ret"],["",";\n    }\n    "],["Conditional","else"],[""," {\n        "],["Statement","chomp"],["","("],["Statement","my"],[""," "],["Identifier","$ret"],[""," = "],["String","qx{git "],["Identifier","$_["],["Number","0"],["Identifier","]"],["String","}"],["",");\n        "],["Statement","return"],[""," "],["Identifier","$ret"],["",";\n    }\n}\n\n"],["Keyword","sub "],["Function","before_build "],["","{\n    "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n    "],["Statement","return"],[""," "],["Conditional","unless"],[""," "],["Identifier","$ENV{"],["String","DZIL_RELEASING"],["Identifier","}"],["",";\n\n    "],["Statement","my"],[""," "],["Identifier","$branch"],[""," = git "],["String","\"symbolic-ref HEAD\""],["",";\n    "],["Statement","die"],[""," "],["String","\"Could not get the current branch\""],["","\n        "],["Conditional","unless"],[""," "],["Identifier","$branch"],["",";\n\n    "],["Identifier","$branch"],[""," =~ "],["Statement","s{"],["String","refs/heads/"],["Statement","}{}"],["",";\n\n    "],["Identifier","$self"],["","->"],["Statement","log"],["","("],["String","\"Ensuring branch "],["Identifier","$branch"],["String"," is up to date\""],["",");\n\n    git "],["String","\"fetch origin\""],["",";\n    "],["Statement","my"],[""," "],["Identifier","$origin"],[""," = git "],["String","\"rev-parse origin/"],["Identifier","$branch"],["String","\""],["",";\n    "],["Statement","my"],[""," "],["Identifier","$head"],[""," = git "],["String","\"rev-parse HEAD\""],["",";\n\n    "],["Statement","die"],[""," "],["String","\"Branch "],["Identifier","$branch"],["String"," is not up to date (origin: "],["Identifier","$origin"],["String",", HEAD: "],["Identifier","$head"],["String",")\""],["","\n        "],["Conditional","if"],[""," "],["Identifier","$origin"],[""," "],["Operator","ne"],[""," "],["Identifier","$head"],["",";\n}\n\n"],["Number","1"],["",";\n"]]