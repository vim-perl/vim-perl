[["Statement","package"],["Type"," MyInline"],["",";\n\n"],["Statement","use strict"],["",";\n"],["Statement","use warnings"],["",";\n\n{\n    "],["Statement","package"],["Type"," My::Extract"],["",";\n\n    "],["Statement","use base"],[""," "],["String","'Test::Inline::Extract'"],["",";\n\n    "],["Statement","use "],["","List::Util "],["String","qw( first )"],["",";\n\n    "],["Comment","# This extracts the SYNOPSIS in addition to code specifically"],["","\n    "],["Comment","# marked for testing"],["","\n    "],["Statement","my"],[""," "],["Identifier","$search"],[""," = "],["String","qr/"],["","\n"],["String","        "],["Special","(?:"],["String","^|"],["Special","\\n)"],["String","                           # After the beginning of the string, or a newline"],["","\n"],["String","        "],["Special","("],["String","                                  # "],["Special","..."],["String"," start capturing"],["","\n"],["String","                                           # EITHER"],["","\n"],["String","            package"],["Special","\\s+"],["String","                            # A package"],["","\n"],["String","            [^"],["Special","\\W\\d"],["String","]"],["Special","\\w*(?:(?:\\'"],["String","|::"],["Special",")"],["String","[^"],["Special","\\W\\d"],["String","]"],["Special","\\w*)*"],["String","    # "],["Special","..."],["String"," with a name"],["","\n"],["String","            "],["Special","\\s*"],["String",";                                  # And a statement terminator"],["","\n"],["String","                |"],["","\n"],["String","                        =head1[ "],["Special","\\t"],["String","]"],["Special","+"],["String","SYNOPSIS"],["Special","\\n"],["","\n"],["String","                        "],["Special",".*?"],["","\n"],["String","                        "],["Special","(?=\\n"],["String","="],["Special",")"],["","\n"],["String","        |                                  # OR"],["","\n"],["String","            =for[ "],["Special","\\t"],["String","]"],["Special","+"],["String","example[ "],["Special","\\t"],["String","]"],["Special","+"],["String","begin"],["Special","\\n"],["String","        # "],["Special","..."],["String"," when we find a =for example begin"],["","\n"],["String","            "],["Special",".*?"],["String","                                   # "],["Special","..."],["String"," and keep capturing"],["","\n"],["String","            "],["Special","\\n"],["String","=for[ "],["Special","\\t"],["String","]"],["Special","+"],["String","example[ "],["Special","\\t"],["String","]"],["Special","+"],["String","end"],["Special","\\s*?"],["String","      # "],["Special","..."],["String"," until the =for example end"],["","\n"],["String","            "],["Special","(?:\\n"],["String","|$"],["Special",")"],["String","                              # "],["Special","..."],["String"," at the end of file or a newline"],["","\n"],["String","        |                                  # OR"],["","\n"],["String","            =begin[ "],["Special","\\t"],["String","]"],["Special","+(?:"],["String","test|testing"],["Special",")(?:"],["String","-SETUP"],["Special",")?"],["String"," # "],["Special","..."],["String"," when we find a =begin test or testing"],["","\n"],["String","            "],["Special",".*?"],["String","                                     # "],["Special","..."],["String"," and keep capturing"],["","\n"],["String","            "],["Special","\\n"],["String","=end[ "],["Special","\\t"],["String","]"],["Special","+(?:"],["String","test|testing"],["Special",")(?:"],["String","-SETUP"],["Special",")?"],["String"," # "],["Special","..."],["String"," until an =end tag"],["","\n"],["String","                        "],["Special",".*?"],["","\n"],["String","            "],["Special","(?:\\n"],["String","|$"],["Special",")"],["String","                              # "],["Special","..."],["String"," at the end of file or a newline"],["","\n"],["String","        "],["Special",")"],["String","                                  # "],["Special","..."],["String"," and stop capturing"],["","\n"],["String","        /isx"],["",";\n\n    "],["Keyword","sub "],["Function","_elements "],["","{\n        "],["Statement","my"],[""," "],["Identifier","$self"],["","     = "],["Statement","shift"],["",";\n        "],["Statement","my"],[""," "],["Identifier","@elements"],[""," = ();\n        "],["Repeat","while"],[""," ( "],["Identifier","$self->{"],["String","source"],["Identifier","}"],[""," =~ "],["Statement","m/"],["Identifier","$search"],["Statement","/go"],[""," ) {\n            "],["Statement","my"],[""," "],["Identifier","$elt"],[""," = "],["Identifier","$1"],["",";\n\n            "],["Comment","# A hack to turn the SYNOPSIS into something Test::Inline"],["","\n            "],["Comment","# doesn't barf on"],["","\n            "],["Conditional","if"],[""," ( "],["Identifier","$elt"],[""," =~ "],["Statement","s/"],["String","=head1[ "],["Special","\\t"],["String","]"],["Special","+"],["String","SYNOPSIS"],["Statement","/"],["String","=begin testing-SETUP"],["Special","\\n\\n"],["String","{"],["Statement","/"],[""," ) {\n                "],["Identifier","$elt"],[""," .= "],["String","\"}"],["Special","\\n\\n"],["String","=end testing-SETUP\""],["",";\n            }\n\n            "],["Comment","# It seems like search.cpan doesn't like a name with"],["","\n            "],["Comment","# spaces after =begin. bleah, what a mess."],["","\n            "],["Identifier","$elt"],[""," =~ "],["Statement","s/"],["String","testing-SETUP"],["Statement","/"],["String","testing SETUP"],["Statement","/g"],["",";\n\n            "],["Statement","push"],[""," "],["Identifier","@elements"],["",", "],["Identifier","$elt"],["",";\n        }\n\n        "],["Comment","# If we have just one element it's a SYNOPSIS, so there's no"],["","\n        "],["Comment","# tests."],["","\n        "],["Statement","return"],[""," "],["Conditional","unless"],[""," "],["Identifier","@elements"],[""," > "],["Number","2"],["",";\n\n        "],["Conditional","if"],[""," ( "],["Identifier","@elements"],[""," && "],["Identifier","$self->{"],["String","source"],["Identifier","}"],[""," =~ "],["Statement","/"],["String","=head1 NAME"],["Special","\\n\\n("],["String","Moose::Cookbook"],["Special","\\S+)"],["Statement","/"],[""," ) {\n            "],["Statement","unshift"],[""," "],["Identifier","@elements"],["",", "],["String","'package '"],[""," . "],["Identifier","$1"],[""," . "],["String","';'"],["",";\n        }\n\n        ( first {"],["Statement","/"],["String","^="],["Statement","/"],["","} "],["Identifier","@elements"],[""," ) ? \\"],["Identifier","@elements"],[""," : "],["String","''"],["",";\n    }\n}\n\n{\n    "],["Statement","package"],["Type"," My::Content"],["",";\n\n    "],["Statement","use base"],[""," "],["String","'Test::Inline::Content::Default'"],["",";\n\n    "],["Keyword","sub "],["Function","process "],["","{\n        "],["Statement","my"],[""," "],["Identifier","$self"],[""," = "],["Statement","shift"],["",";\n\n        "],["Statement","my"],[""," "],["Identifier","$base"],[""," = "],["Identifier","$self"],["","->SUPER::process("],["Identifier","@_"],["",");\n\n        "],["Identifier","$base"],[""," =~ "],["Statement","s/"],["Special","(\\$\\|"],["String"," = 1;"],["Special",")"],["Statement","/"],["String","use Test::Fatal;"],["Special","\\n"],["Identifier","$1"],["Statement","/"],["",";\n\n        "],["Statement","return"],[""," "],["Identifier","$base"],["",";\n    }\n}\n\n"],["Number","1"],["",";\n"]]